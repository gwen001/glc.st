<IfModule mod_ssl.c>
<VirtualHost *:443>
        ServerName glc.st
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/html/glc.st/public/
        ErrorLog ${APACHE_LOG_DIR}/glc.st_error.log
        CustomLog ${APACHE_LOG_DIR}/glc.st_access.log vhost_combined

        Options +FollowSymLinks -Indexes

        ErrorDocument 401 /404.html
        ErrorDocument 403 /404.html
        ErrorDocument 404 /404.html

        SSLCertificateFile /etc/letsencrypt/live/glc.st-0001/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/glc.st-0001/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>

<IfModule mod_ssl.c>
<VirtualHost *:443>
        ServerName www.glc.st
        ServerAlias *.glc.st
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/html/glc.st/public/
        ErrorLog ${APACHE_LOG_DIR}/glc.st_error.log
        CustomLog ${APACHE_LOG_DIR}/glc.st_access.log vhost_combined

        RewriteEngine on
        RewriteRule ^ https://glc.st%{REQUEST_URI} [END,NE,R=permanent]
        SSLCertificateFile /etc/letsencrypt/live/glc.st/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/glc.st/privkey.pem
</VirtualHost>
</IfModule>

<VirtualHost *:80>
        ServerName glc.st
        ServerAlias www.glc.st
        ServerAlias *.glc.st
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/html/glc.st/public/
        ErrorLog ${APACHE_LOG_DIR}/glc.st_error.log
        CustomLog ${APACHE_LOG_DIR}/glc.st_access.log vhost_combined

        RewriteEngine on
        RewriteRule ^ https://glc.st%{REQUEST_URI} [END,NE,R=permanent]
</VirtualHost>
